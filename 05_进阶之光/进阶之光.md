# 一、自定义View

## 0、重要函数列表

| 函数名                                  | 作用         |
| --------------------------------------- | ------------ |
| int  getWidth（） /  int  getHeight（） | 获取宽/高    |
| layout（L,T,R,B）                       | 重新放置View |
|                                         |              |



## 1、坐标系

<img src="C:\Users\31367\AppData\Roaming\Typora\typora-user-images\image-20220511232117608.png" alt="image-20220511232117608" style="zoom:67%;" />

触摸点位通过 event 事件来获取 View 的坐标



## 2、View的滑动

①` layout（L,T,R,B）`

​	计算出需要滑动的距离，再通过`layout() `重新放置	

② `offsetLeftAndRight(OffsetX)`  和  ` offsetTopAndButtom(OffsetY)`

​    根据`offsetX`和`Y`的值移动`View`

③`LayoutParams` 和 `ViewGroup.MarginLayoutParams`

```java
//使用LayoutParams，由于父布局是LinearLayout，所以采用LinearLayout.LayoutParams
LinearLayout.LayoutParams layoutParams= (LinearLayout.LayoutParams) getLayoutParams();
layoutParams.leftMargin = getLeft() + offsetX;
layoutParams.topMargin = getTop() + offsetY;
setLayoutParams(layoutParams);
```

```java
//使用MarginLayoutParams，后续一致
ViewGroup.MarginLayoutParams layoutParams = (ViewGroup.MarginLayoutParams) getLayoutParams();
```

④属性动画

```java
ObjectAnimator animator = ObjectAnimator.ofFloat(view, "translationX", startX, endX)
    .setsetDuration(500)
    .start(); 
```



⑤ `scrollTo(offsetX,offsetY)` 和 `scrllBy(offsetX,offsetY)`

​	1.移动`View`的内容，如果是在`ViewGroup`中，则移动的是所有子`View`。

​	2.它的参考系为画布，所以和正常移动的值相反（左正，右负，上正，下负）。

​	3.瞬间完成

```
 ((View)getParent()).scrollBy(-offsetX,-offsetY);
```



















